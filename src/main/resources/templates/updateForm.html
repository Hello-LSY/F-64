<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
  <meta charset="UTF-8">
  <title>ê¸€ ìˆ˜ì •</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f8fafc;
    }
    .custom-textarea {
      height: 300px;
    }
    #imagePreview img {
      max-width: 100%;
      max-height: 300px;
      margin-top: 10px;
      border-radius: 8px;
    }
  </style>
</head>
<body>

<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<div th:replace="layout/navbar :: fragment"></div>

<!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
<div class="max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg mt-6">
  <h3 class="text-3xl font-bold text-gray-800 mb-6">âœï¸ ê¸€ ìˆ˜ì •</h3>

  <form method="post" th:action="@{/board/updatePro/__${board.id}__}" th:object="${board}" enctype="multipart/form-data">
    <!-- ì œëª© -->
    <div class="mb-4">
      <label for="title" class="block text-gray-700 font-medium">ì œëª©</label>
      <input type="text" id="title" name="title"
             class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"
             required th:value="*{title}">
    </div>

    <!-- ë‚´ìš© -->
    <div class="mb-4">
      <label for="content" class="block text-gray-700 font-medium">ë‚´ìš©</label>
      <textarea id="content" name="content"
                class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 custom-textarea"
                required th:text="*{content}"></textarea>
    </div>

    <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
    <div class="mb-4">
      <label for="imageFile" class="block text-gray-700 font-medium">ì´ë¯¸ì§€ ì—…ë¡œë“œ</label>
      <input type="file" id="imageFile" name="imageFile" multiple class="w-full p-2 border rounded-lg">
      <div id="imagePreview"></div> <!-- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°ë¥¼ í‘œì‹œí•  ì»¨í…Œì´ë„ˆ -->
    </div>

    <!-- ë²„íŠ¼ -->
    <div class="mt-6 text-right">
      <button type="submit" class="px-4 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-md shadow-md">
        âœ… ìˆ˜ì • ì™„ë£Œ
      </button>
      <a href="/board/list"
         class="px-4 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-md shadow-md">
        ğŸ”™ ëª©ë¡ìœ¼ë¡œ
      </a>
    </div>
  </form>
</div>

<script>
  document.getElementById("imageFile").addEventListener("change", function(event) {
    const input = event.target;
    const previewContainer = document.getElementById("imagePreview");

    if (input.files && input.files[0]) {
      const file = input.files[0];
      const reader = new FileReader();

      reader.onload = function (e) {
        previewContainer.innerHTML = `<img src="${e.target.result}" alt="Preview Image">`;
      };
      reader.readAsDataURL(file);
    }
  });
</script>

</body>
</html>
